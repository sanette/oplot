<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Isocurve (oplot.Oplot.Make.Isocurve)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../../../index.html">Index</a> &#x00BB; <a href="../../../index.html">oplot</a> &#x00BB; <a href="../../index.html">Oplot</a> &#x00BB; <a href="../index.html">Make</a> &#x00BB; Isocurve</nav><header class="odoc-preamble"><h1>Module <code><span>Make.Isocurve</span></code></h1><p>Additional utilities for drawing and inspecting curves defined by an implicit equation.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-info"><a href="#type-info" class="anchor"></a><code><span><span class="keyword">type</span> info</span><span> = </span><span>{</span></code><ol><li id="type-info.grid_size" class="def record field anchored"><a href="#type-info.grid_size" class="anchor"></a><code><span>grid_size : int * int;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Size of the initial sampling array. See <a href="#val-compute_level"><code>compute_level</code></a>.</p><span class="comment-delim">*)</span></div></li><li id="type-info.grid" class="def record field anchored"><a href="#type-info.grid" class="anchor"></a><code><span>grid : <a href="../index.html#type-plot_object">plot_object</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Plottig this object will draw the initial grid. This field is empty if <code>debug=false</code> in the call of <a href="#val-compute_level"><code>compute_level</code></a>.</p><span class="comment-delim">*)</span></div></li><li id="type-info.boxes" class="def record field anchored"><a href="#type-info.boxes" class="anchor"></a><code><span>boxes : <a href="../index.html#type-plot_object">plot_object</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Plotting this object will draw the cells where subsampling has been performed.</p><span class="comment-delim">*)</span></div></li><li id="type-info.steps" class="def record field anchored"><a href="#type-info.steps" class="anchor"></a><code><span>steps : int;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>See <a href="#val-compute_level"><code>compute_level</code></a>.</p><span class="comment-delim">*)</span></div></li><li id="type-info.depth" class="def record field anchored"><a href="#type-info.depth" class="anchor"></a><code><span>depth : int;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>See <a href="#val-compute_level"><code>compute_level</code></a>.</p><span class="comment-delim">*)</span></div></li><li id="type-info.poles" class="def record field anchored"><a href="#type-info.poles" class="anchor"></a><code><span>poles : int;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Number of sign changes of <code>f</code> that have not been considered as zeros, but rather as poles (where the function diverges or is highly discontinuous.)</p><span class="comment-delim">*)</span></div></li><li id="type-info.message" class="def record field anchored"><a href="#type-info.message" class="anchor"></a><code><span>message : <span class="xref-unresolved">Stdlib</span>.Buffer.t;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Reading this string willl give you some debug information.</p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compute_level"><a href="#val-compute_level" class="anchor"></a><code><span><span class="keyword">val</span><span class="val"> compute_level</span> : 
  <span><span class="optlabel">?debug</span>:bool <span class="arrow">→</span></span>
  <span><span class="optlabel">?pixel_size</span>:<span>(int * int)</span> <span class="arrow">→</span></span>
  <span><span class="optlabel">?grid_size</span>:<span>(int * int)</span> <span class="arrow">→</span></span>
  <span><span class="optlabel">?sub_size</span>:<span>(int * int)</span> <span class="arrow">→</span></span>
  <span><span class="optlabel">?steps</span>:int <span class="arrow">→</span></span>
  <span><span class="optlabel">?better</span>:int <span class="arrow">→</span></span>
  <span><span class="optlabel">?depth</span>:int <span class="arrow">→</span></span>
  <span><span>(<span><a href="../../Points/index.html#type-point">Points.point</a> <span class="arrow">→</span></span> float)</span> <span class="arrow">→</span></span>
  <span><span>(<a href="../../Points/index.html#type-point">Points.point</a> * <a href="../../Points/index.html#type-point">Points.point</a>)</span> <span class="arrow">→</span></span>
  <a href="../index.html#type-plot_object">plot_object</a> * <a href="#type-info">info</a></span></code></div><div class="spec-doc"><p>Use <code>compute f (p0, p1)</code> to compute (an approximation) of the level set <code>f p = 0</code> inside the box delimited by the diagonal points <code>p0,p1</code>.</p><p>This is essentialy the same as <a href="../../Plt/index.html#val-implicit_curve"><code>Plt.implicit_curve</code></a> but returns both a <code>plot_object</code> and an <code>info</code> value. Use this version only if you need to obtain debug information.</p><p>The meaning of the optional parameters is as follows.</p><ul><li><code>pixel_size</code> is a hint to size in pixels of the box where the curve will be drawn; it is used to detect the resolution at which the computations should be made. The default is <code>(500,500)</code>.</li><li><code>grid_size</code> is size of the initial sampling of the function <code>f</code>. For instance, if <code>grid_size=(7,5)</code> the (x,y) region where the implicit curve is sought is divised into 7x5 cells; hence there are 8=7+1 sampling points in the horizontal (x) direction, and 6=5+1 sampling points in the vertical direction. By default <code>grid_size</code> is automatically detected by looking at the function oscillations, starting from an initial size of (34,34). Specifying this parameter skips this detection, resulting in less evaluations of the function.</li></ul><p>Note however that sub-sampling will be applied (if <code>sub_size</code> is not <code>(1,1)</code>) in the cells where the curvature of the levelset is high.</p><ul><li><code>sub_size</code> is the size of the sub-grid recursively used for a better approximation of the curve in cells where the curvature seems too high. The default is <code>(2,2)</code>.</li><li><code>depth</code> is the maximum number of recursive subdivisions of cells. By default it is computed in such a way that the smallest sub-cell is not smaller than the required pixel resolution. You may reduce it for fastest computation. <code>depth=4</code> is typically a good choice.</li><li><code>steps</code> is the maximum number of steps used by the Newton method to determine the position of the curve on the cells boundaries. Currently the default is 4.</li><li><code>better</code> is a quick way to obtain a more precise curve without setting any other parameter. You can first try <code>better=1</code> , then <code>better=2</code>, etc. Using a negative number will degrade the precision of the curve. Of course the default is 0.</li></ul><p>In the image below we plot the initial grid (in green) and the recursive subgrids (in cyan). We see that the curve looks nice and smooth while the initial grid was not a priori fine enough.</p><img src="isocurve_debug.png" class="oplot" alt="isocurve example"><p>(Image obtained by the <code>heart.ml</code> example.)</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-print_info"><a href="#val-print_info" class="anchor"></a><code><span><span class="keyword">val</span><span class="val"> print_info</span> : <span><a href="#type-info">info</a> <span class="arrow">→</span></span> unit</span></code></div></div></div></body></html>
